{
  "version": 3,
  "sources": ["../src/index.ts"],
  "sourcesContent": ["export type HttpResponse<T extends object> = {\n  data: T;\n  config: RequestInit;\n  headers: Headers;\n  ok: boolean;\n  redirected: boolean;\n  status: number;\n  statusText: string;\n  type: ResponseType;\n  url: string;\n};\n\ntype Interceptor = {\n  onRequest: (config: RequestInit) => RequestInit;\n  onResponse: <T extends object>(response: HttpResponse<T>) => HttpResponse<T> | PromiseLike<HttpResponse<T>>;\n  onRequestError: (reason: unknown) => Promise<never>;\n  onResponseError: (reason: unknown) => Promise<never>;\n};\n\nconst processHttpResponse = async <T extends object>(response: Response, config: RequestInit) => {\n  const data = (await response.json().catch(() => ({}))) as T;\n  const { headers, ok, redirected, status, statusText, type, url } = response;\n  return { data, config, headers, ok, redirected, status, statusText, type, url };\n};\n\nclass Http {\n  private baseURL: string;\n\n  private defaultConfig: RequestInit;\n\n  private interceptor: Interceptor;\n\n  constructor(baseURL = \"\", defaultConfig: RequestInit = {}) {\n    this.baseURL = baseURL;\n    this.defaultConfig = defaultConfig;\n    this.interceptor = {\n      onRequest: (config) => config,\n      onResponse: (response) => response,\n      onRequestError: (reason) => Promise.reject(reason),\n      onResponseError: (reason) => Promise.reject(reason),\n    };\n  }\n\n  registerInterceptor(interceptor: Partial<Interceptor>) {\n    this.interceptor = {\n      ...this.interceptor,\n      ...interceptor,\n    };\n  }\n\n  request<T extends object = object>(url: string, config: RequestInit) {\n    if (!url.startsWith(\"http\")) {\n      url = `${this.baseURL}${url}`;\n    }\n\n    config = { ...this.defaultConfig, ...this.interceptor.onRequest(config) };\n    config.headers = { ...this.defaultConfig.headers, ...config.headers };\n\n    try {\n      return fetch(url, config)\n        .then((response) => processHttpResponse<T>(response, config))\n        .then(this.interceptor.onResponse)\n        .catch(this.interceptor.onResponseError);\n    } catch (reason) {\n      return this.interceptor.onRequestError(reason);\n    }\n  }\n\n  get<T extends object>(url: string, config: RequestInit = {}) {\n    return this.request<T>(url, {\n      ...config,\n      method: \"GET\",\n    });\n  }\n\n  post<T extends object>(url: string, config: RequestInit = {}) {\n    return this.request<T>(url, {\n      ...config,\n      method: \"POST\",\n    });\n  }\n\n  patch<T extends object>(url: string, config: RequestInit = {}) {\n    return this.request<T>(url, {\n      ...config,\n      method: \"PATCH\",\n    });\n  }\n\n  put<T extends object>(url: string, config: RequestInit = {}) {\n    return this.request<T>(url, {\n      ...config,\n      method: \"PUT\",\n    });\n  }\n\n  delete<T extends object>(url: string, config: RequestInit = {}) {\n    return this.request<T>(url, {\n      ...config,\n      method: \"DELETE\",\n    });\n  }\n}\n\nexport default Http;\n"],
  "mappings": ";AAmBA,IAAM,sBAAsB,OAAyB,UAAoB,WAAwB;AAC/F,QAAM,OAAQ,MAAM,SAAS,KAAK,EAAE,MAAM,OAAO,CAAC,EAAE;AACpD,QAAM,EAAE,SAAS,IAAI,YAAY,QAAQ,YAAY,MAAM,IAAI,IAAI;AACnE,SAAO,EAAE,MAAM,QAAQ,SAAS,IAAI,YAAY,QAAQ,YAAY,MAAM,IAAI;AAChF;AAEA,IAAM,OAAN,MAAW;AAAA,EAOT,YAAY,UAAU,IAAI,gBAA6B,CAAC,GAAG;AACzD,SAAK,UAAU;AACf,SAAK,gBAAgB;AACrB,SAAK,cAAc;AAAA,MACjB,WAAW,CAAC,WAAW;AAAA,MACvB,YAAY,CAAC,aAAa;AAAA,MAC1B,gBAAgB,CAAC,WAAW,QAAQ,OAAO,MAAM;AAAA,MACjD,iBAAiB,CAAC,WAAW,QAAQ,OAAO,MAAM;AAAA,IACpD;AAAA,EACF;AAAA,EAEA,oBAAoB,aAAmC;AACrD,SAAK,cAAc;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,GAAG;AAAA,IACL;AAAA,EACF;AAAA,EAEA,QAAmC,KAAa,QAAqB;AACnE,QAAI,CAAC,IAAI,WAAW,MAAM,GAAG;AAC3B,YAAM,GAAG,KAAK,OAAO,GAAG,GAAG;AAAA,IAC7B;AAEA,aAAS,EAAE,GAAG,KAAK,eAAe,GAAG,KAAK,YAAY,UAAU,MAAM,EAAE;AACxE,WAAO,UAAU,EAAE,GAAG,KAAK,cAAc,SAAS,GAAG,OAAO,QAAQ;AAEpE,QAAI;AACF,aAAO,MAAM,KAAK,MAAM,EACrB,KAAK,CAAC,aAAa,oBAAuB,UAAU,MAAM,CAAC,EAC3D,KAAK,KAAK,YAAY,UAAU,EAChC,MAAM,KAAK,YAAY,eAAe;AAAA,IAC3C,SAAS,QAAQ;AACf,aAAO,KAAK,YAAY,eAAe,MAAM;AAAA,IAC/C;AAAA,EACF;AAAA,EAEA,IAAsB,KAAa,SAAsB,CAAC,GAAG;AAC3D,WAAO,KAAK,QAAW,KAAK;AAAA,MAC1B,GAAG;AAAA,MACH,QAAQ;AAAA,IACV,CAAC;AAAA,EACH;AAAA,EAEA,KAAuB,KAAa,SAAsB,CAAC,GAAG;AAC5D,WAAO,KAAK,QAAW,KAAK;AAAA,MAC1B,GAAG;AAAA,MACH,QAAQ;AAAA,IACV,CAAC;AAAA,EACH;AAAA,EAEA,MAAwB,KAAa,SAAsB,CAAC,GAAG;AAC7D,WAAO,KAAK,QAAW,KAAK;AAAA,MAC1B,GAAG;AAAA,MACH,QAAQ;AAAA,IACV,CAAC;AAAA,EACH;AAAA,EAEA,IAAsB,KAAa,SAAsB,CAAC,GAAG;AAC3D,WAAO,KAAK,QAAW,KAAK;AAAA,MAC1B,GAAG;AAAA,MACH,QAAQ;AAAA,IACV,CAAC;AAAA,EACH;AAAA,EAEA,OAAyB,KAAa,SAAsB,CAAC,GAAG;AAC9D,WAAO,KAAK,QAAW,KAAK;AAAA,MAC1B,GAAG;AAAA,MACH,QAAQ;AAAA,IACV,CAAC;AAAA,EACH;AACF;AAEA,IAAO,cAAQ;",
  "names": []
}
